<html> 
    <head>
        <meta charset="UTF-8" />
        <title>Library Page</title>
        <link rel="stylesheet" href="css/library.css">
        <script src="js/input.js"></script>
    </head>
    <body>
      <link href="input.html">
        <h1>Music library</h1>
        <nav>
          <div class="nav-sort-re">
            <a href="LIB_S_ALF.html">Sort Alphabetically</a>
          </div>
        </nav>
        <!--
        Source - https://stackoverflow.com/a
        Posted by Gass, modified by community. See post 'Timeline' for change history
        Retrieved 2025-12-19, License - CC BY-SA 4.0
        -->
        
        
        <div id="LIB_container">
        </div>



        <script>
          document.addEventListener('DOMContentLoaded', () => {
            let songs = [];
            const container = document.getElementById("LIB_container");
            const songCount = Number(localStorage.getItem('songCount'));
            for (let i = 0; i < songCount; i++) {
                songs[i] = localStorage.getItem('linkPath' + (i + 1));
                const div = document.createElement("div");
                div.id = "song" + (i + 1); 
                div.classList.add("song");
                div.textContent = localStorage.getItem('songName' + (i + 1)) + " by " + localStorage.getItem('artistName' + (i + 1));
                container.appendChild(div);
            }
            document.addEventListener('click',()=>{
              if(event.target && event.target.classList.contains('song')){
                const number = event.target.id.replace('song','');
                const songLink = localStorage.getItem('linkPath' + number);
                localStorage.setItem('currentSong', songLink);
                alert(localStorage.getItem('currentSong'));
                window.open("player.html");
              
              }
            })
          });
        </script>
        <div class="nav-home">
          <a href="index.html">Home</a>
        </div>
    </body>
</html>
